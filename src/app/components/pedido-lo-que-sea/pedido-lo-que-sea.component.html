<!-- Registro de un Pedido de lo que Sea -->
<form name='formPedido' [formGroup]='formPedido' class="bg-light">

  <fieldset>
    <!--campo Descripción-->
    <div class="form-group row my-3">
      <label class="col-form-label col-sm-auto" for="descripcionPedido">
        Descripción <span class="text-danger">*</span>
      </label>

      <div class="col-sm-5">
        <input id="descripcionPedido" type="text" class="form-control" formControlName="descripcionPedido" [ngClass]="{'is-invalid': (formPedido.controls['descripcionPedido'].touched || submitted)
        && formPedido.controls['descripcionPedido'].errors}"/>

        <div class="text-danger" *ngIf="(formPedido.controls['descripcionPedido'].touched || submitted) && formPedido.controls['descripcionPedido'].errors?.['required']">
          Dato requerido.
        </div>

        <div class="text-danger" *ngIf="
        formPedido.controls['descripcionPedido'].errors?.['minlength'] ||
        formPedido.controls['descripcionPedido'].errors?.['maxlength'] ">
          Dato texto, 3 a 30 caracteres.
        </div>
      </div>
    </div>

    <!--campo imagen-->
    <div class="row form-group-my-3">
      <label for="archivo" class="btn btn-dark">Subir imagen</label>
      <input id="archivo" style="visibility:hidden;" type="file" multiple accept=".jpg, .JPG" (change)="validarArchivo($event)" class="imagenCheck">

      <div *ngIf="subioImagen">
        <img [src]="imagen" width="200px" height="200px" alt="">
      </div>
    </div>

    <fieldset>
      <legend>Direccion comercio</legend>
      <!--campos Calle nombre y altura de comercio-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-1" for="calleNombreComercio">
          Calle <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="calleNombreComercio" type="text" name="calleNombreComercio" class="form-control" formControlName="calleNombreComercio" [ngClass]="{
          'is-invalid': (formPedido.controls['calleNombreComercio'].touched || submitted)
          && formPedido.controls['calleNombreComercio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['calleNombreComercio'].touched || submitted) && formPedido.controls['calleNombreComercio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['calleNombreComercio'].errors?.['minlength'] || formPedido.controls['calleNombreComercio'].errors?.['maxlength'] ">
            Dato texto, 3 a 50 caracteres.
          </div>
        </div>

        <label class="col-form-label col-sm-auto" for="calleNumeroComercio">
          Altura <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="calleNumeroComercio" type="text" name="calleNumeroComercio" class="form-control" formControlName="calleNumeroComercio" [ngClass]="{'is-invalid': (formPedido.controls['calleNumeroComercio'].touched || submitted)
          && formPedido.controls['calleNumeroComercio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['calleNumeroComercio'].touched || submitted) && formPedido.controls['calleNumeroComercio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['calleNumeroComercio'].errors?.['pattern']">
            Dato numérico, 1 a 5 dígitos.
          </div>
        </div>
      </div>

      <!--campos Ciudad comercio-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-1" for="ciudadComercio">
          Ciudad <span class="text-danger">*</span>
        </label>

        <div class="col-sm-6">
          <select id="ciudadComercio" name="ciudadComercio" class="form-select" formControlName="ciudadComercio" [ngClass]="{'is-invalid': (formPedido.controls['ciudadComercio'].touched || submitted)
          && formPedido.controls['ciudadComercio'].errors}">
            <option value="null" selected>Seleccione una ciudad...</option>
            <option value="Cor">Córdoba</option>
            <option value="Sf">San Francisco</option>
            <option value="Vgb">Villa General Belgrano</option>
          </select>

          <div class="text-danger" *ngIf="(formPedido.controls['ciudadComercio'].touched || submitted) && formPedido.controls['ciudadComercio'].errors?.['required']">
            Dato requerido.
          </div>
        </div>
      </div>

      <div class="row form-group my-3">
        <label class="col-form-label col-sm-auto" for="referenciaComercio">
          Referencia (Opcional)
        </label>

        <div class="col-sm-3">
          <input id="referenciaComercio" type="text" name="referenciaComercio" class="form-control"/>
        </div>

        <div class="text-danger" *ngIf="
        formPedido.controls['referenciaComercio'].errors?.['minlength'] ||
        formPedido.controls['referenciaComercio'].errors?.['maxlength'] ">
          Dato texto, 3 a 50 caracteres.
        </div>
      </div>

    </fieldset> <hr>

    <fieldset>
      <legend>Dirección entrega</legend>
      <!--campos Calle nombre y altura de domicilio-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-1" for="calleNombreDomicilio">
          Calle <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="calleNombreDomicilio" type="text" name="calleNombreDomicilio" class="form-control" formControlName="calleNombreDomicilio" [ngClass]="{
          'is-invalid': (formPedido.controls['calleNombreDomicilio'].touched || submitted) && formPedido.controls['calleNombreDomicilio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['calleNombreDomicilio'].touched || submitted) && formPedido.controls['calleNombreDomicilio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['calleNombreDomicilio'].errors?.['minlength'] ||formPedido.controls['calleNombreDomicilio'].errors?.['maxlength'] ">
            Dato texto, 3 a 50 caracteres.
          </div>
        </div>

        <label class="col-form-label col-sm-auto" for="calleNumeroDomicilio">
          Altura <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="calleNumeroDomicilio" type="text" name="calleNumeroDomicilio" class="form-control" formControlName="calleNumeroDomicilio" [ngClass]="{
          'is-invalid': (formPedido.controls['calleNumeroDomicilio'].touched || submitted) && formPedido.controls['calleNumeroDomicilio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['calleNumeroDomicilio'].touched || submitted) && formPedido.controls['calleNumeroDomicilio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['calleNumeroDomicilio'].errors?.['pattern']">
            Dato numérico, 1 a 5 dígitos.
          </div>
        </div>
      </div>

      <div class="row form-group my-3">
        <label><input type="checkbox" id="esDepto" #EsDepto value="first_checkbox"> Es un departamento</label>
      </div>

      <!--MOSTRAR SOLO SI EL CHECKBOX ESTA MARCADO--> <!--Este *ngIf no funciona-->

      <div class="row form-group my-3"  *ngIf="EsDepto.checked">
        <label class="col-form-label col-sm-1" for="pisoDepartamento">
          Piso <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="pisoDepartamento" type="text" name="pisoDepartamento" class="form-control" formControlName="pisoDepartamento" [ngClass]="{
          'is-invalid': (formPedido.controls['pisoDomicilio'].touched || submitted) && formPedido.controls['pisoDomicilio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['pisoDomicilio'].touched || submitted) && formPedido.controls['pisoDomicilio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['pisoDomicilio'].errors?.['pattern']">
            Dato texto, 1 a 2 caracteres.
          </div>
        </div>

        <label class="col-form-label col-sm-auto" for="letraDepartamento">
          Letra <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <input id="letraDepartamento" type="text" name="letraDepartamento" class="form-control" formControlName="letraDepartamento" [ngClass]="{
          'is-invalid': (formPedido.controls['deptoDomicilio'].touched || submitted) && formPedido.controls['deptoDomicilio'].errors}"/>
          <div class="text-danger" *ngIf="(formPedido.controls['deptoDomicilio'].touched || submitted) && formPedido.controls['deptoDomicilio'].errors?.['required']">
            Dato requerido.
          </div>

          <div class="text-danger" *ngIf="formPedido.controls['deptoDomicilio'].errors?.['pattern']">
            Dato alfabético, 1 dígito.
          </div>
        </div>
      </div>

      <!--campos Ciudad domicilio-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-1" for="ciudadDomicilio">
          Ciudad <span class="text-danger">*</span>
        </label>

        <div class="col-sm-6">
          <select id="ciudadDomicilio" name="ciudadDomicilio" class="form-select" formControlName="ciudadDomicilio" [ngClass]="{'is-invalid': (formPedido.controls['ciudadDomicilio'].touched || submitted)
          && formPedido.controls['ciudadDomicilio'].errors}">
            <option value="null" selected>Seleccione una ciudad...</option>
            <option value="Cor">Córdoba</option>
            <option value="Sf">San Francisco</option>
            <option value="Vgb">Villa General Belgrano</option>
          </select>
          <div class="text-danger" *ngIf="(formPedido.controls['ciudadDomicilio'].touched || submitted) && formPedido.controls['ciudadDomicilio'].errors?.['required']">
            Dato requerido.
          </div>
        </div>
      </div>

      <div class="row form-group my-5">
        <label class="col-form-label col-sm-auto" for="referenciaDomicilio">
          Referencia (Opcional)
        </label>

        <div class="col-sm-3">
          <input id="referenciaDomicilio" type="text" name="referenciaDomicilio" class="form-control"/>
        </div>

        <div class="text-danger" *ngIf="
        formPedido.controls['referenciaDomicilio'].errors?.['minlength'] ||
        formPedido.controls['referenciaDomicilio'].errors?.['maxlength'] ">
          Dato texto, 3 a 50 caracteres.
        </div>
      </div>

    </fieldset><hr>

    <!--campos de Entrega-->
    <fieldset>

      <legend>Entrega</legend>

      <div class="row form-group my-3">
        <label class="col-form-label col-sm-2" for="momentoEntrega">
          Momento de Entrega <span class="text-danger">*</span>
        </label>

        <div class="col-sm-3">
          <select [value]="" id="momentoEntrega" name="momentoEntrega"  #momentoDeEntrega class="form-select" formControlName="momentoEntrega" [ngClass]="{'is-invalid': (formPedido.controls['momentoEntrega'].touched || submitted)
            && formPedido.controls['momentoEntrega'].errors}">
            <option value="null" selected>Seleccione el momento de entrega...</option>
            <option value="Pa">Programar ahora</option>
            <option value="Lap">Lo antes posible</option>
          </select>
          <div class="text-danger" *ngIf="(formPedido.controls['momentoEntrega'].touched || submitted) && formPedido.controls['momentoEntrega'].errors?.['required']">
            Dato requerido.
          </div>
        </div>
      </div>

      <!--campos momento de entrega-->

      <div class="row form-group my-3" *ngIf="momentoDeEntrega.selectedIndex ===1">

        <label class="col-form-label col-sm-auto" for="fechaEntrega">
          Fecha <span class="text-danger">*</span>
        </label>

        <div class="col-sm-2" >
            <input id="fechaEntrega" type="date" name="fechaEntrega" class="form-control" formControlName="fechaEntrega" />
        </div>

        <label class="col-form-label col-sm-auto" for="horaEntrega">
         Hora <span class="text-danger">*</span>
        </label>

        <div class="col-sm-2">
          <input id="horaEntrega" type="time" name="horaEntrega" class="form-control" formControlName="horaEntrega" />
        </div>
      </div>

    </fieldset>

    <hr>

    <fieldset>
      <!--campos Total a pagar-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-auto" for="totalPagar">
          Total a pagar <span class="text-danger">*</span>
        </label>

        <div class="col-sm-2">
          <input id="totalPagar" type="text" name="totalPagar" class="form-control" formControlName="totalPagar" readonly="readonly" value="$100"/>
        </div>
      </div>

      <!--campos Forma de pago-->
      <div class="row form-group my-3">
        <label class="col-form-label col-sm-2" for="FormaDePago">
          Forma de pago <span class="text-danger">*</span>
        </label>

        <div class="col-sm-6">
          <select id="FormaDePago" name="FormaDePago" #FormaDePago class="form-select" formControlName="FormaDePago" [ngClass]="{'is-invalid': (formPedido.controls['formaPago'].touched || submitted)
            && formPedido.controls['formaPago'].errors}">
            <option value="null" selected>Seleccione una forma de pago...</option>
            <option value="Tc">Tarjeta de Crédito MasterCard</option>
            <option value="Efec">Efectivo</option>
          </select>
          <div class="text-danger" *ngIf="(formPedido.controls['formaPago'].touched || submitted) && formPedido.controls['formaPago'].errors?.['required']">
            Dato requerido.
          </div>
        </div>
      </div>

      <!--campos Efectivo-->
      <div class="row form-group my-3" *ngIf="FormaDePago.selectedIndex ===2">

        <label class="col-form-label col-sm-auto" for="montoAAbonar">
          Monto a abonar <span class="text-danger">*</span>
         </label>

         <div class="col-sm-2">
           <input id="montoAAbonar" type="text" name="montoAAbonar" class="form-control" formControlName="montoAAbonar" />
         </div>

      </div>

      <!--campos de Tarjeta-->
      <div *ngIf="FormaDePago.selectedIndex === 1">
        <div class="row form-group my-3">

          <label class="col-form-label col-sm-auto" for="nroTarjeta">
            Numero de tarjeta <span class="text-danger">*</span>
          </label>

          <div class="col-sm-2">
            <input id="nroTarjeta" type="text" name="nroTarjeta" class="form-control" formControlName="nroTarjeta" />
          </div>

          <label class="col-form-label col-sm-auto" for="titularTarjeta">
            Titular <span class="text-danger">*</span>
          </label>

          <div class="col-sm-2">
            <input id="titularTarjeta" type="text" name="titularTarjeta" class="form-control" formControlName="titularTarjeta" />
          </div>

        </div>

        <div class="row form-group my-3">

          <label class="col-form-label col-sm-auto" for="fechaVencimientoTarjeta">
            Fecha de Vencimiento <span class="text-danger">*</span>
          </label>

          <div class="col-sm-2">
            <input id="fechaVencimientoTarjeta" type="text" name="fechaVencimientoTarjeta" class="form-control" formControlName="fechaVencimientoTarjeta" placeholder="MM/AA"/>
          </div>

          <label class="col-form-label col-sm-auto" for="codigoSeguridadTarjeta">
            Codigo de Seguridad <span class="text-danger">*</span>
          </label>

          <div class="col-sm-2">
            <input id="codigoSeguridadTarjeta" type="text" name="codigoSeguridadTarjeta" class="form-control" formControlName="codigoSeguridadTarjeta" />
          </div>

        </div>

      </div>

    </fieldset>




  </fieldset>

  <!-- Botones Grabar, Cancelar/Volver' -->
  <div class="row justify-content-center">
    <button type="button" class="btn btn-primary" (click)="grabar()">
      <i class="fa fa-check"></i> Grabar
    </button>&nbsp;
  </div>

  <!--texto: Revisar los datos ingresados...-->
  <div id="divMsjFormRegistro" class="row alert alert-danger" *ngIf="formPedido.invalid && submitted">
    <i class="fa fa-exclamation-sign"></i>Revisar los datos ingresados
  </div>
</form>
